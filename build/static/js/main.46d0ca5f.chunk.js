(window.webpackJsonpgov=window.webpackJsonpgov||[]).push([[0],{23:function(t,e,a){t.exports=a(47)},28:function(t,e,a){},47:function(t,e,a){"use strict";a.r(e);var n,i=a(0),r=a.n(i),c=a(20),o=a.n(c),l=(a(28),a(10)),s=a.n(l),u=a(21),d=(a(8),a(9),a(2)),h=a(3),m=a(5),p=a(4),v=a(6),f=function(t){function e(t){var a;return Object(d.a)(this,e),(a=Object(m.a)(this,Object(p.a)(e).call(this,t))).state={content:"undefined",stair:"undefined"},a}return Object(v.a)(e,t),Object(h.a)(e,[{key:"render",value:function(){return r.a.createElement("div",{id:this.props.id,style:{width:"100%"}},r.a.createElement("p",{style:{color:"steelblue",fontSize:"24px"}},"\u610f\u89c1\uff1a",this.state.content),r.a.createElement("br",null),r.a.createElement("p",{style:{color:"steelblue",fontSize:"24px"}},"\u793e\u4f1a\u5c42\u9762\uff1a",this.state.stair))}}]),e}(i.Component),w=function(t){function e(t){var a;return Object(d.a)(this,e),(a=Object(m.a)(this,Object(p.a)(e).call(this,t))).state={options:[{value:"",content:"\u9009\u62e9\u7f16\u53f7"}]},a}return Object(v.a)(e,t),Object(h.a)(e,[{key:"render",value:function(){return r.a.createElement("select",{id:this.props.id,style:{width:"50px",marginLeft:"10px",marginTop:this.props.marginTop}},this.state.options.map((function(t,e){return r.a.createElement("option",{value:t.value,key:e},t.content)})))}}]),e}(i.Component),g=a(7),x=a.n(g);!function(t){t[t["\u5e02\u6559\u80b2\u5c40"]=0]="\u5e02\u6559\u80b2\u5c40",t[t["\u5e02\u5efa\u59d4"]=1]="\u5e02\u5efa\u59d4"}(n||(n={}));var E=function(t){function e(t){var a;return Object(d.a)(this,e),(a=Object(m.a)(this,Object(p.a)(e).call(this,t))).colortap=["#FFB6C1","#DC143C","#A0522D","#FF1493","#FF00FF","#800080","#4B0082","#7B68EE","#0000FF","#000080","#6495ED","#778899","#00BFFF","#B0E0E6","#00FFFF","#2F4F4F","#00FA9A","#006400","#FFFF00","#FF8C00"],a.fx=function(){return 40},a.fy=function(){return 0},a.state={data:[],groups:20,source:null},a}return Object(v.a)(e,t),Object(h.a)(e,[{key:"updateScale",value:function(){if(0!==this.state.data.length){var t=this.state.data[0].x,e=this.state.data[0].x,a=this.state.data[0].y,n=this.state.data[0].y;this.state.data.forEach((function(i){i.x<t&&(t=i.x),i.x>e&&(e=i.x),i.y<a&&(a=i.y),i.y>n&&(n=i.y)})),this.fx=function(a){return(.8*a-t)/(e-t)*1206+40},this.fy=function(t){return(.9*t-a)/(n-a)*450}}}},{key:"render",value:function(){var t=this;return this.updateScale(),r.a.createElement("svg",{width:1256,transform:"translate(0, 6)",height:450,id:"tsne",xmlns:"http://www.w3.org/2000/svg"},this.colortap.map((function(e,a){return a>=t.state.groups?r.a.createElement("g",{key:"lda_g_".concat(a)}):r.a.createElement("g",{key:"lda_g_".concat(a)},r.a.createElement("circle",{key:"lda_icon_".concat(a),xmlns:"http://www.w3.org/2000/svg",id:"lda_icon_".concat(a),className:"lda_stack_icon",cx:30,cy:21*Math.sqrt(20/t.state.groups)*a+24,r:8*Math.sqrt(20/t.state.groups),style:{fill:e},onClick:function(){x()(".lda_stack_".concat(a)).animate({r:15},200,(function(){setTimeout((function(){x()(".lda_stack_".concat(a)).animate({r:6},600,void 0)}),200)}))}}),r.a.createElement("text",{key:"lda_label_".concat(a),xmlns:"http://www.w3.org/2000/svg",id:"lda_icon_".concat(a),className:"lda_stack_label",x:44,y:21*Math.sqrt(20/t.state.groups)*a+24,textAnchor:"start",dy:"0.4em",style:{fontSize:13*Math.sqrt(20/t.state.groups),fill:"dark"}},"\u4e3b\u9898 ".concat(a+1)))})),this.state.data.map((function(e,a){var n=t.colortap[e.stack%t.colortap.length],i=(256-parseInt(n.substring(1,3),16)).toString(16),c=(256-parseInt(n.substring(3,5),16)).toString(16),o=(256-parseInt(n.substring(5,7),16)).toString(16);return r.a.createElement("circle",{key:"lda_point_".concat(a),xmlns:"http://www.w3.org/2000/svg",id:"lda_point_".concat(a),className:"lda_stack_".concat(e.stack),cx:t.fx(e.x),cy:t.fy(e.y),r:6,style:{opacity:.6,fill:n,stroke:"#".concat(i).concat(c).concat(o,"99"),strokeWidth:1},onMouseOver:function(){},onMouseMove:function(){},onMouseOut:function(){},onClick:function(){}})})))}},{key:"componentDidMount",value:function(){var t=this;x.a.getJSON("./data/2018sjyjk.json",(function(e){var a=[];e.forEach((function(t){a.push({x:t[0],y:t[1],stack:t.k})})),t.setState({data:a,groups:20,source:n.\u5e02\u6559\u80b2\u5c40})}))}}]),e}(i.Component),y=function(t){function e(t){var a;return Object(d.a)(this,e),(a=Object(m.a)(this,Object(p.a)(e).call(this,t))).state={data:null},a}return Object(v.a)(e,t),Object(h.a)(e,[{key:"render",value:function(){return this.state.data?r.a.createElement("svg",{width:1259,transform:"translate(0, 6)",height:90,id:"centrebar",xmlns:"http://www.w3.org/2000/svg"},r.a.createElement("rect",{xmlns:"http://www.w3.org/2000/svg",x:59,y:32,rx:10,ry:10,width:1159,height:18,style:{fill:"#ccc",stroke:"black"}}),r.a.createElement("rect",{xmlns:"http://www.w3.org/2000/svg",x:59,y:32,rx:10,ry:10,width:1159*this.state.data,height:18,style:{fill:this.state.data<=.35?"red":this.state.data<=.65?"yellow":"steelblue",stroke:"none"}}),r.a.createElement("text",{xmlns:"http://www.w3.org/2000/svg",x:1159*this.state.data+57,y:20,textAnchor:"middle",style:{fill:"black",fontSize:13}},this.state.data)):r.a.createElement("svg",{width:1259,transform:"translate(0, 6)",height:90,id:"centrebar",xmlns:"http://www.w3.org/2000/svg"},r.a.createElement("rect",{xmlns:"http://www.w3.org/2000/svg",x:59,y:32,rx:10,ry:10,width:1159,height:18,style:{fill:"#ccc",stroke:"black"}}))}},{key:"componentDidMount",value:function(){this.setState({data:.8})}}]),e}(i.Component),F=function(){},b=function(t){},k=function(t){function e(t){var a;return Object(d.a)(this,e),(a=Object(m.a)(this,Object(p.a)(e).call(this,t))).colortap=["#FFB6C1","#DC143C","#A0522D","#FF1493","#FF00FF","#800080","#4B0082","#7B68EE","#0000FF","#000080","#6495ED","#778899","#00BFFF","#B0E0E6","#00FFFF","#2F4F4F","#00FA9A","#006400","#FFFF00","#FF8C00"],a.state={words:[]},a}return Object(v.a)(e,t),Object(h.a)(e,[{key:"render",value:function(){var t=this,e=0;this.state.words.forEach((function(t){t.value>e&&(e=t.value)}));var a=this.state.words;return a.sort((function(t,e){return t.value-e.value})),r.a.createElement("svg",{width:420,height:230,id:"wordcloud",xmlns:"http://www.w3.org/2000/svg",style:{position:"relative",top:"-20px"}},a.map((function(a,n){var i=a.value/e*16+20,c=408-i*a.text.length*1.1,o=218-1.3*i,l=Math.random()*c+i*a.text.length*.55+6,s=Math.random()*o+.65*i+6;return 0!==n&&Math.sqrt(Math.pow(l-210,2)+Math.pow(s-115,2))<10*Math.sqrt(n)&&(l=l<210?l-100*n:l+100*n,s=s<115?s-24*n:s+24*n),r.a.createElement("text",{key:n,className:"cloud_word",xmlns:"http://www.w3.org/2000/svg",x:l,y:s,textAnchor:"middle",style:{fill:t.colortap[n%20],fontSize:i}},a.text)})))}},{key:"componentDidMount",value:function(){var t=this;x()("*").keydown((function(t){82===t.which&&F()})),F=function(){t.setState({words:t.state.words})},b=function(t){var e=t.topics,a=[],n=0,i=1;e.forEach((function(t){var e=null;t.words.forEach((function(t){(!e||t.value>e.value&&t.word.length>1)&&(e=t)})),a.push(e||{word:"?",value:0})})),a.forEach((function(t){t.value>n&&(n=t.value),t.value<i&&(i=t.value)}));for(var r=0;r<a.length;r++)a[r]={word:a[r].word,value:(a[r].value-i)/(n-i)}},this.setState({words:[{text:"\u5173\u952e\u8bcd",value:1024},{text:"\u5185\u5bb9",value:628},{text:"\u4e3b\u9898",value:800},{text:"\u70ed\u8bcd",value:750},{text:"\u5e72\u6270\u8bcd",value:500},{text:"\u5e38\u7528\u5b57",value:800},{text:"\u4e13\u6709\u540d\u8bcd",value:470},{text:"\u7ec6\u8282",value:10},{text:"\u503c\u5f97\u5173\u6ce8\u7684\u5185\u5bb9",value:640},{text:"\u67d0\u4e2a\u7ecf\u5e38\u51fa\u73b0\u7684\u5b57\u7b26\u4e32",value:440}]})}}]),e}(i.Component),j=function(t){function e(t){var a;return Object(d.a)(this,e),(a=Object(m.a)(this,Object(p.a)(e).call(this,t))).colortap=["#FFB6C1","#DC143C","#A0522D","#FF1493","#FF00FF","#800080","#4B0082","#7B68EE","#0000FF","#000080","#6495ED","#778899","#00BFFF","#B0E0E6","#00FFFF","#2F4F4F","#00FA9A","#006400","#FFFF00","#FF8C00"],a.state={data:[]},a}return Object(v.a)(e,t),Object(h.a)(e,[{key:"render",value:function(){var t=this,e=380/this.state.data.length;return r.a.createElement("svg",{width:420,height:230,id:"distribution",xmlns:"http://www.w3.org/2000/svg"},this.state.data.map((function(a,n){return r.a.createElement("rect",{xmlns:"http://www.w3.org/2000/svg",key:"topic_distri_".concat(n),x:20+n*e+.18*e,y:186-160*a,width:.64*e,height:160*a,style:{fill:t.colortap[n%20],stroke:"black"}})})),this.state.data.map((function(t,a){return r.a.createElement("text",{xmlns:"http://www.w3.org/2000/svg",key:"topic_distri_label_".concat(a),x:20+a*e+.52*e,y:203,textAnchor:"middle",style:{fill:"black",fontSize:Math.sqrt(36*e)/3.4}},"\u4e3b\u9898".concat(a+1))})),this.state.data.map((function(t,a){return r.a.createElement("text",{xmlns:"http://www.w3.org/2000/svg",key:"topic_distri_value_".concat(a),x:20+a*e+.52*e,y:180-160*t,textAnchor:"middle",style:{fill:"black",fontSize:Math.sqrt(36*e)/3.6}},"".concat(parseInt((1e4*t).toString())/100,"%"))})))}},{key:"import",value:function(t){for(var e=[],a=t.distributions[0].length,n=0;n<a;n++)e.push(0);t.distributions.forEach((function(t){t.forEach((function(t){e[t.stack]+=t.value}))}));for(var i=0;i<e.length;i++)e[i]/=t.distributions.length;this.setState({data:e})}},{key:"componentDidMount",value:function(){var t=this;x.a.getJSON("data/lda$5$2018@sjyj.json",(function(e){t.import(e)}))}}]),e}(i.Component),O=a(22),_=a.n(O),C=function(t){};(function(){var t=Object(u.a)(s.a.mark((function t(e,a,i){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,_.a.get("/run/".concat(e,"/").concat(a===n.\u5e02\u5efa\u59d4?"sjw":"sjyj","/").concat(i),{headers:"Content-type:text/html;charset=utf-8"}).then((function(t){b(JSON.parse(t.data))}),(function(t){console.warn(t)})).catch((function(t){console.warn(t)}));case 2:case"end":return t.stop()}}),t)})));return function(e,a,n){return t.apply(this,arguments)}})()(2018,n.\u5e02\u5efa\u59d4,5);var S=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{id:"left"},r.a.createElement("div",{id:"dataselect"},r.a.createElement("div",{className:"panell-heading"},"dataselect"),r.a.createElement("div",null,r.a.createElement("h1",{style:{fontSize:"18px",marginLeft:"9px"}},"\u76f8\u5173\u5efa\u8bae\u7684LDA\u7ed3\u679c\u4e0e\u60c5\u611f\u5206\u6790")),r.a.createElement("div",null,r.a.createElement("select",{id:"Year",style:{width:"50px",marginLeft:"10px",marginTop:"0px"}},r.a.createElement("option",{value:"0"},"\u9009\u62e9\u6570\u636e"),r.a.createElement("option",{value:"1",id:"year2016"},"2016"),r.a.createElement("option",{value:"2",id:"year2017"},"2017"),r.a.createElement("option",{value:"3",id:"year2018"},"2018")),r.a.createElement("select",{id:"project",onChange:C,style:{width:"50px",marginLeft:"10px",marginTop:"0px"}},r.a.createElement("option",{value:"0"},"\u9009\u62e9\u6570\u636e"),r.a.createElement("option",{value:"1",id:"1"},"\u5e02\u6559\u80b2\u5c40"),r.a.createElement("option",{value:"2",id:"2"},"\u5e02\u5efa\u59d4")),r.a.createElement(w,{id:"area",marginTop:"0px"}),r.a.createElement(w,{id:"cs",marginTop:"10px"}),r.a.createElement("br",null),"\xa0\xa0\xa0Topic:",r.a.createElement("input",{className:"endTime",type:"text",id:"etime",style:{marginLeft:"9px",width:"100px",marginTop:"5px"}}),r.a.createElement("input",{type:"button",value:"TEST",id:"btn",style:{width:"75px"}})),r.a.createElement("div",{id:"sent"})),r.a.createElement("div",{id:"select"},r.a.createElement("div",{className:"panell-heading"},"Opinion1"),r.a.createElement(f,{id:"cloud"})),r.a.createElement("div",{id:"text"},r.a.createElement("div",{className:"panell-heading"},"Opinion2"),r.a.createElement(f,{id:"cloud2"}))),r.a.createElement("div",{id:"LDA"},r.a.createElement("div",{className:"panell-heading"},"LDA",r.a.createElement(E,null))),r.a.createElement("div",{id:"emotion1"},r.a.createElement("div",{className:"panell-heading"},"Emotion"),r.a.createElement("div",{id:"Emo1",style:{height:"90px",width:"1259px"}},r.a.createElement(y,null))),r.a.createElement("div",{id:"topic"},r.a.createElement("div",{className:"panell-heading"},"KeyWordCloud"),r.a.createElement("div",{id:"cloud1",style:{height:"230px",width:"420px"}},r.a.createElement("button",{type:"button",style:{position:"relative",padding:"0px 5px",top:"-27px",left:"386px"},onClick:function(t){F()}},"R"),r.a.createElement(k,null))),r.a.createElement("div",{id:"emotion"},r.a.createElement("div",{className:"panell-heading"},"All"),r.a.createElement("div",{id:"Emo",style:{height:"230px",width:"420px"}},r.a.createElement(j,null))),r.a.createElement("div",{id:"extra"},r.a.createElement("div",{className:"panell-heading"},"Extra"),r.a.createElement("div",{id:"extraDiv",style:{height:"230px",width:"420px"}})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(S,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()}))},8:function(t,e,a){},9:function(t,e,a){}},[[23,1,2]]]);
//# sourceMappingURL=main.46d0ca5f.chunk.js.map